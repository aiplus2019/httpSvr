#include "contentTypeMng.h"

ContentTypeMng::ContentTypeMng(bool bCT)
{
    m_gzExt.insert("js");
    m_gzExt.insert("css");
    m_gzExt.insert("html");
    m_gzExt.insert("ico");
    m_gzExt.insert("htm");

    if (bCT) {

        m_no_know_type = "application/octet-stream";
        m_mpContentType["001"] = "application/x-001";
        m_mpContentType["301"] = "application/x-301";
        m_mpContentType["323"] = "text/h323";
        m_mpContentType["906"] = "application/x-906";
        m_mpContentType["907"] = "drawing/907";
        m_mpContentType["a11"] = "application/x-a11";
        m_mpContentType["acp"] = "audio/x-mei-aac";
        m_mpContentType["ai"] = "application/postscript";
        m_mpContentType["aif"] = "audio/aiff";
        m_mpContentType["aifc"] = "audio/aiff";
        m_mpContentType["aiff"] = "audio/aiff";
        m_mpContentType["anv"] = "application/x-anv";
        m_mpContentType["asa"] = "text/asa";
        m_mpContentType["asf"] = "video/x-ms-asf";
        m_mpContentType["asp"] = "text/asp";
        m_mpContentType["asx"] = "video/x-ms-asf";
        m_mpContentType["au"] = "audio/basic";
        m_mpContentType["avi"] = "video/avi";
        m_mpContentType["awf"] = "application/vnd.adobe.workflow";
        m_mpContentType["biz"] = "text/xml";
        m_mpContentType["bmp"] = "application/x-bmp";
        m_mpContentType["bot"] = "application/x-bot";
        m_mpContentType["c4t"] = "application/x-c4t";
        m_mpContentType["c90"] = "application/x-c90";
        m_mpContentType["cal"] = "application/x-cals";
        m_mpContentType["cat"] = "application/vnd.ms-pki.seccat";
        m_mpContentType["cdf"] = "application/x-netcdf";
        m_mpContentType["cdr"] = "application/x-cdr";
        m_mpContentType["cel"] = "application/x-cel";
        m_mpContentType["cer"] = "application/x-x509-ca-cert";
        m_mpContentType["cg4"] = "application/x-g4";
        m_mpContentType["cgm"] = "application/x-cgm";
        m_mpContentType["cit"] = "application/x-cit";
        m_mpContentType["cml"] = "text/xml";
        m_mpContentType["cmp"] = "application/x-cmp";
        m_mpContentType["cmx"] = "application/x-cmx";
        m_mpContentType["cot"] = "application/x-cot";
        m_mpContentType["crl"] = "application/pkix-crl";
        m_mpContentType["crt"] = "application/x-x509-ca-cert";
        m_mpContentType["csi"] = "application/x-csi";
        m_mpContentType["css"] = "text/css";
        m_mpContentType["cut"] = "application/x-cut";
        m_mpContentType["dbf"] = "application/x-dbf";
        m_mpContentType["dbm"] = "application/x-dbm";
        m_mpContentType["dbx"] = "application/x-dbx";
        m_mpContentType["dcd"] = "text/xml";
        m_mpContentType["dcx"] = "application/x-dcx";
        m_mpContentType["der"] = "application/x-x509-ca-cert";
        m_mpContentType["dgn"] = "application/x-dgn";
        m_mpContentType["dib"] = "application/x-dib";
        m_mpContentType["dll"] = "application/x-msdownload";
        m_mpContentType["doc"] = "application/msword";
        m_mpContentType["dot"] = "application/msword";
        m_mpContentType["drw"] = "application/x-drw";
        m_mpContentType["dtd"] = "text/xml";
        m_mpContentType["dwf"] = "Model/vnd.dwf";
        m_mpContentType["dwf"] = "application/x-dwf";
        m_mpContentType["dwg"] = "application/x-dwg";
        m_mpContentType["dxb"] = "application/x-dxb";
        m_mpContentType["dxf"] = "application/x-dxf";
        m_mpContentType["edn"] = "application/vnd.adobe.edn";
        m_mpContentType["emf"] = "application/x-emf";
        m_mpContentType["eml"] = "message/rfc822";
        m_mpContentType["ent"] = "text/xml";
        m_mpContentType["epi"] = "application/x-epi";
        m_mpContentType["eps"] = "application/x-ps";
        m_mpContentType["eps"] = "application/postscript";
        m_mpContentType["etd"] = "application/x-ebx";
        m_mpContentType["exe"] = "application/x-msdownload";
        m_mpContentType["fax"] = "image/fax";
        m_mpContentType["fdf"] = "application/vnd.fdf";
        m_mpContentType["fif"] = "application/fractals";
        m_mpContentType["fo"] = "text/xml";
        m_mpContentType["frm"] = "application/x-frm";
        m_mpContentType["g4"] = "application/x-g4";
        m_mpContentType["gbr"] = "application/x-gbr";
        m_mpContentType["gif"] = "image/gif";
        m_mpContentType["gl2"] = "application/x-gl2";
        m_mpContentType["gp4"] = "application/x-gp4";
        m_mpContentType["hgl"] = "application/x-hgl";
        m_mpContentType["hmr"] = "application/x-hmr";
        m_mpContentType["hpg"] = "application/x-hpgl";
        m_mpContentType["hpl"] = "application/x-hpl";
        m_mpContentType["hqx"] = "application/mac-binhex40";
        m_mpContentType["hrf"] = "application/x-hrf";
        m_mpContentType["hta"] = "application/hta";
        m_mpContentType["htc"] = "text/x-component";
        m_mpContentType["htm"] = "text/html";
        m_mpContentType["html"] = "text/html";
        m_mpContentType["htt"] = "text/webviewhtml";
        m_mpContentType["htx"] = "text/html";
        m_mpContentType["icb"] = "application/x-icb";
        m_mpContentType["ico"] = "image/x-icon";
        m_mpContentType["iff"] = "application/x-iff";
        m_mpContentType["ig4"] = "application/x-g4";
        m_mpContentType["igs"] = "application/x-igs";
        m_mpContentType["iii"] = "application/x-iphone";
        m_mpContentType["img"] = "application/x-img";
        m_mpContentType["ins"] = "application/x-internet-signup";
        m_mpContentType["isp"] = "application/x-internet-signup";
        m_mpContentType["ivf"] = "video/x-ivf";
        m_mpContentType["java"] = "java/*";
        m_mpContentType["jfif"] = "image/jpeg";
        m_mpContentType["jpe"] = "image/jpeg";
        m_mpContentType["jpe"] = "application/x-jpe";
        m_mpContentType["jpeg"] = "image/jpeg";
        m_mpContentType["jpg"] = "image/jpeg";
        m_mpContentType["jpg"] = "application/x-jpg";
        m_mpContentType["js"] = "application/x-javascript";
        m_mpContentType["jsp"] = "text/html";
        m_mpContentType["la1"] = "audio/x-liquid-file";
        m_mpContentType["lar"] = "application/x-laplayer-reg";
        m_mpContentType["latex"] = "application/x-latex";
        m_mpContentType["lavs"] = "audio/x-liquid-secure";
        m_mpContentType["lbm"] = "application/x-lbm";
        m_mpContentType["lmsff"] = "audio/x-la-lms";
        m_mpContentType["ls"] = "application/x-javascript";
        m_mpContentType["ltr"] = "application/x-ltr";
        m_mpContentType["m1v"] = "video/x-mpeg";
        m_mpContentType["m2v"] = "video/x-mpeg";
        m_mpContentType["m3u"] = "audio/mpegurl";
        m_mpContentType["m4e"] = "video/mpeg4";
        m_mpContentType["mac"] = "application/x-mac";
        m_mpContentType["man"] = "application/x-troff-man";
        m_mpContentType["math"] = "text/xml";
        m_mpContentType["mdb"] = "application/msaccess";
        m_mpContentType["mdb"] = "application/x-mdb";
        m_mpContentType["mfp"] = "application/x-shockwave-flash";
        m_mpContentType["mht"] = "message/rfc822";
        m_mpContentType["mhtml"] = "message/rfc822";
        m_mpContentType["mi"] = "application/x-mi";
        m_mpContentType["mid"] = "audio/mid";
        m_mpContentType["midi"] = "audio/mid";
        m_mpContentType["mil"] = "application/x-mil";
        m_mpContentType["mml"] = "text/xml";
        m_mpContentType["mnd"] = "audio/x-musicnet-download";
        m_mpContentType["mns"] = "audio/x-musicnet-stream";
        m_mpContentType["mocha"] = "application/x-javascript";
        m_mpContentType["movie"] = "video/x-sgi-movie";
        m_mpContentType["mp1"] = "audio/mp1";
        m_mpContentType["mp2"] = "audio/mp2";
        m_mpContentType["mp2v"] = "video/mpeg";
        m_mpContentType["mp3"] = "audio/mp3";
        m_mpContentType["mp4"] = "video/mpeg4";
        m_mpContentType["mpa"] = "video/x-mpg";
        m_mpContentType["mpd"] = "application/vnd.ms-project";
        m_mpContentType["mpe"] = "video/x-mpeg";
        m_mpContentType["mpeg"] = "video/mpg";
        m_mpContentType["mpg"] = "video/mpg";
        m_mpContentType["mpga"] = "audio/rn-mpeg";
        m_mpContentType["mpp"] = "application/vnd.ms-project";
        m_mpContentType["mps"] = "video/x-mpeg";
        m_mpContentType["mpt"] = "application/vnd.ms-project";
        m_mpContentType["mpv"] = "video/mpg";
        m_mpContentType["mpv2"] = "video/mpeg";
        m_mpContentType["mpw"] = "application/vnd.ms-project";
        m_mpContentType["mpx"] = "application/vnd.ms-project";
        m_mpContentType["mtx"] = "text/xml";
        m_mpContentType["mxp"] = "application/x-mmxp";
        m_mpContentType["net"] = "image/pnetvue";
        m_mpContentType["nrf"] = "application/x-nrf";
        m_mpContentType["nws"] = "message/rfc822";
        m_mpContentType["odc"] = "text/x-ms-odc";
        m_mpContentType["out"] = "application/x-out";
        m_mpContentType["p10"] = "application/pkcs10";
        m_mpContentType["p12"] = "application/x-pkcs12";
        m_mpContentType["p7b"] = "application/x-pkcs7-certificates";
        m_mpContentType["p7c"] = "application/pkcs7-mime";
        m_mpContentType["p7m"] = "application/pkcs7-mime";
        m_mpContentType["p7r"] = "application/x-pkcs7-certreqresp";
        m_mpContentType["p7s"] = "application/pkcs7-signature";
        m_mpContentType["pc5"] = "application/x-pc5";
        m_mpContentType["pci"] = "application/x-pci";
        m_mpContentType["pcl"] = "application/x-pcl";
        m_mpContentType["pcx"] = "application/x-pcx";
        m_mpContentType["pdf"] = "application/pdf";
        m_mpContentType["pdf"] = "application/pdf";
        m_mpContentType["pdx"] = "application/vnd.adobe.pdx";
        m_mpContentType["pfx"] = "application/x-pkcs12";
        m_mpContentType["pgl"] = "application/x-pgl";
        m_mpContentType["pic"] = "application/x-pic";
        m_mpContentType["pko"] = "application/vnd.ms-pki.pko";
        m_mpContentType["pl"] = "application/x-perl";
        m_mpContentType["plg"] = "text/html";
        m_mpContentType["pls"] = "audio/scpls";
        m_mpContentType["plt"] = "application/x-plt";
        m_mpContentType["png"] = "image/png";
        m_mpContentType["png"] = "application/x-png";
        m_mpContentType["pot"] = "application/vnd.ms-powerpoint";
        m_mpContentType["ppa"] = "application/vnd.ms-powerpoint";
        m_mpContentType["ppm"] = "application/x-ppm";
        m_mpContentType["pps"] = "application/vnd.ms-powerpoint";
        m_mpContentType["ppt"] = "application/vnd.ms-powerpoint";
        m_mpContentType["ppt"] = "application/x-ppt";
        m_mpContentType["pr"] = "application/x-pr";
        m_mpContentType["prf"] = "application/pics-rules";
        m_mpContentType["prn"] = "application/x-prn";
        m_mpContentType["prt"] = "application/x-prt";
        m_mpContentType["ps"] = "application/x-ps";
        m_mpContentType["ps"] = "application/postscript";
        m_mpContentType["ptn"] = "application/x-ptn";
        m_mpContentType["pwz"] = "application/vnd.ms-powerpoint";
        m_mpContentType["r3t"] = "text/vnd.rn-realtext3d";
        m_mpContentType["ra"] = "audio/vnd.rn-realaudio";
        m_mpContentType["ram"] = "audio/x-pn-realaudio";
        m_mpContentType["ras"] = "application/x-ras";
        m_mpContentType["rat"] = "application/rat-file";
        m_mpContentType["rdf"] = "text/xml";
        m_mpContentType["rec"] = "application/vnd.rn-recording";
        m_mpContentType["red"] = "application/x-red";
        m_mpContentType["rgb"] = "application/x-rgb";
        m_mpContentType["rjs"] = "application/vnd.rn-realsystem-rjs";
        m_mpContentType["rjt"] = "application/vnd.rn-realsystem-rjt";
        m_mpContentType["rlc"] = "application/x-rlc";
        m_mpContentType["rle"] = "application/x-rle";
        m_mpContentType["rm"] = "application/vnd.rn-realmedia";
        m_mpContentType["rmf"] = "application/vnd.adobe.rmf";
        m_mpContentType["rmi"] = "audio/mid";
        m_mpContentType["rmj"] = "application/vnd.rn-realsystem-rmj";
        m_mpContentType["rmm"] = "audio/x-pn-realaudio";
        m_mpContentType["rmp"] = "application/vnd.rn-rn_music_package";
        m_mpContentType["rms"] = "application/vnd.rn-realmedia-secure";
        m_mpContentType["rmvb"] = "application/vnd.rn-realmedia-vbr";
        m_mpContentType["rmx"] = "application/vnd.rn-realsystem-rmx";
        m_mpContentType["rnx"] = "application/vnd.rn-realplayer";
        m_mpContentType["rp"] = "image/vnd.rn-realpix";
        m_mpContentType["rpm"] = "audio/x-pn-realaudio-plugin";
        m_mpContentType["rsml"] = "application/vnd.rn-rsml";
        m_mpContentType["rt"] = "text/vnd.rn-realtext";
        m_mpContentType["rtf"] = "application/msword";
        m_mpContentType["rtf"] = "application/x-rtf";
        m_mpContentType["rv"] = "video/vnd.rn-realvideo";
        m_mpContentType["sam"] = "application/x-sam";
        m_mpContentType["sat"] = "application/x-sat";
        m_mpContentType["sdp"] = "application/sdp";
        m_mpContentType["sdw"] = "application/x-sdw";
        m_mpContentType["sit"] = "application/x-stuffit";
        m_mpContentType["slb"] = "application/x-slb";
        m_mpContentType["sld"] = "application/x-sld";
        m_mpContentType["slk"] = "drawing/x-slk";
        m_mpContentType["smi"] = "application/smil";
        m_mpContentType["smil"] = "application/smil";
        m_mpContentType["smk"] = "application/x-smk";
        m_mpContentType["snd"] = "audio/basic";
        m_mpContentType["sol"] = "text/plain";
        m_mpContentType["sor"] = "text/plain";
        m_mpContentType["spc"] = "application/x-pkcs7-certificates";
        m_mpContentType["spl"] = "application/futuresplash";
        m_mpContentType["spp"] = "text/xml";
        m_mpContentType["ssm"] = "application/streamingmedia";
        m_mpContentType["sst"] = "application/vnd.ms-pki.certstore";
        m_mpContentType["stl"] = "application/vnd.ms-pki.stl";
        m_mpContentType["stm"] = "text/html";
        m_mpContentType["sty"] = "application/x-sty";
        m_mpContentType["svg"] = "text/xml";
        m_mpContentType["swf"] = "application/x-shockwave-flash";
        m_mpContentType["tdf"] = "application/x-tdf";
        m_mpContentType["tg4"] = "application/x-tg4";
        m_mpContentType["tga"] = "application/x-tga";
        m_mpContentType["tif"] = "image/tiff";
        m_mpContentType["tif"] = "application/x-tif";
        m_mpContentType["tiff"] = "image/tiff";
        m_mpContentType["tld"] = "text/xml";
        m_mpContentType["top"] = "drawing/x-top";
        m_mpContentType["torrent"] = "application/x-bittorrent";
        m_mpContentType["tsd"] = "text/xml";
        m_mpContentType["txt"] = "text/plain";
        m_mpContentType["uin"] = "application/x-icq";
        m_mpContentType["uls"] = "text/iuls";
        m_mpContentType["vcf"] = "text/x-vcard";
        m_mpContentType["vda"] = "application/x-vda";
        m_mpContentType["vdx"] = "application/vnd.visio";
        m_mpContentType["vml"] = "text/xml";
        m_mpContentType["vpg"] = "application/x-vpeg005";
        m_mpContentType["vsd"] = "application/vnd.visio";
        m_mpContentType["vsd"] = "application/x-vsd";
        m_mpContentType["vss"] = "application/vnd.visio";
        m_mpContentType["vst"] = "application/vnd.visio";
        m_mpContentType["vst"] = "application/x-vst";
        m_mpContentType["vsw"] = "application/vnd.visio";
        m_mpContentType["vsx"] = "application/vnd.visio";
        m_mpContentType["vtx"] = "application/vnd.visio";
        m_mpContentType["vxml"] = "text/xml";
        m_mpContentType["wav"] = "audio/wav";
        m_mpContentType["wax"] = "audio/x-ms-wax";
        m_mpContentType["wb1"] = "application/x-wb1";
        m_mpContentType["wb2"] = "application/x-wb2";
        m_mpContentType["wb3"] = "application/x-wb3";
        m_mpContentType["wbmp"] = "image/vnd.wap.wbmp";
        m_mpContentType["wiz"] = "application/msword";
        m_mpContentType["wk3"] = "application/x-wk3";
        m_mpContentType["wk4"] = "application/x-wk4";
        m_mpContentType["wkq"] = "application/x-wkq";
        m_mpContentType["wks"] = "application/x-wks";
        m_mpContentType["wm"] = "video/x-ms-wm";
        m_mpContentType["wma"] = "audio/x-ms-wma";
        m_mpContentType["wmd"] = "application/x-ms-wmd";
        m_mpContentType["wmf"] = "application/x-wmf";
        m_mpContentType["wml"] = "text/vnd.wap.wml";
        m_mpContentType["wmv"] = "video/x-ms-wmv";
        m_mpContentType["wmx"] = "video/x-ms-wmx";
        m_mpContentType["wmz"] = "application/x-ms-wmz";
        m_mpContentType["wp6"] = "application/x-wp6";
        m_mpContentType["wpd"] = "application/x-wpd";
        m_mpContentType["wpg"] = "application/x-wpg";
        m_mpContentType["wpl"] = "application/vnd.ms-wpl";
        m_mpContentType["wq1"] = "application/x-wq1";
        m_mpContentType["wr1"] = "application/x-wr1";
        m_mpContentType["wri"] = "application/x-wri";
        m_mpContentType["wrk"] = "application/x-wrk";
        m_mpContentType["ws"] = "application/x-ws";
        m_mpContentType["ws2"] = "application/x-ws";
        m_mpContentType["wsc"] = "text/scriptlet";
        m_mpContentType["wsdl"] = "text/xml";
        m_mpContentType["wvx"] = "video/x-ms-wvx";
        m_mpContentType["xdp"] = "application/vnd.adobe.xdp";
        m_mpContentType["xdr"] = "text/xml";
        m_mpContentType["xfd"] = "application/vnd.adobe.xfd";
        m_mpContentType["xfdf"] = "application/vnd.adobe.xfdf";
        m_mpContentType["xhtml"] = "text/html";
        m_mpContentType["xls"] = "application/vnd.ms-excel";
        m_mpContentType["xls"] = "application/x-xls";
        m_mpContentType["xlw"] = "application/x-xlw";
        m_mpContentType["xml"] = "text/xml";
        m_mpContentType["xpl"] = "audio/scpls";
        m_mpContentType["xq"] = "text/xml";
        m_mpContentType["xql"] = "text/xml";
        m_mpContentType["xquery"] = "text/xml";
        m_mpContentType["xsd"] = "text/xml";
        m_mpContentType["xsl"] = "text/xml";
        m_mpContentType["xslt"] = "text/xml";
        m_mpContentType["xwd"] = "application/x-xwd";
        m_mpContentType["x_b"] = "application/x-x_b";
        m_mpContentType["sis"] = "application/vnd.symbian.install";
        m_mpContentType["sisx"] = "application/vnd.symbian.install";
        m_mpContentType["x_t"] = "application/x-x_t";
        m_mpContentType["ipa"] = "application/vnd.iphone";
        m_mpContentType["apk"] = "application/vnd.android.package-archive";
        m_mpContentType["xap"] = "application/x-silverlight-app";
    }

}

ContentTypeMng::~ContentTypeMng()
{

}


string ContentTypeMng::getContentType(string & extName)
{
    string strCT = "Content-Type: ";
    auto it = m_mpContentType.find(extName);
    if (m_mpContentType.end() != it) {
        strCT += it->second;
    }   
    else {
        strCT += m_no_know_type;
    }

    return strCT;
}

bool ContentTypeMng::findExtName(string & extName)
{
    bool bResult = false;
    auto it = m_gzExt.find(extName);
    if (m_gzExt.end() != it) {
        bResult = true;
    }
    return bResult;
}